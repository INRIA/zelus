(test
 (name zruntest) ; name of the test
 (modules zruntest) ; ml file test runner
 (deps (glob_files good/*.zls) (glob_files bad/*.zls)) ; files dependencies
 (libraries zelus.zlcompilerlibs zelus.zlrunlibs alcotest)) ; libraries dependencies

;(executable
; (name zruntest)
; (modes (byte exe))
;; ; depends on zlcompilelibs
;  (libraries zelus.zlcompilerlibs zelus.zlrunlibs alcotest)
;  ; copy in the current dir.
;  (promote (until-clean))) ; copy .exe and .bc in current dir until dune clean

;(executable 
;    (name check)
;    (modes byte exe)
;    (modules check)
;    (promote (until-clean)))

;(rule
; (copy %{project_root}/lib/std/stdlib.zli stdlib.zli))

;(test
; (name zruntest)
; (modules zruntest)
; (deps (glob_files good/*.zls) (glob_files bad/*.zls) stdlib.zli)
; (libraries alcotest zelus.zlcompilerlibs))

;(executable
;  (name zruntest)
;  (modes (byte exe))
;  ; depends on zlcompilelibs
;  (libraries alcotest zelus.zlcompilerlibs)
;  ; copy in the current dir.
;  (promote (until-clean)))