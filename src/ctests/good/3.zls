let node f1 () returns (o)
  if true then o = 1 else o = 2

let node f2 () returns (o)
  o = f1() + f1()
  
let node f3 () returns (o)
  automaton
  | A -> do o = 1 until true then B
  | B -> do o = f2 () until false then A
  init
    if true then B else A
  end