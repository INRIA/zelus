<!DOCTYPE html>
<html lang="en">
  <head>
!INCLUDE: src/inc-header.html
    <title>Zélus: download</title>
    <meta name="description" content="Download and install Zélus.">
    <meta name="author" content="Timothy Bourke and Marc Pouzet">
  </head>

  <body data-spy="scroll" data-target=".sidebar-nav">

!INCLUDE: src/inc-titlebar.html
<script>
window.onload = function() {
  document.getElementById('title-download').className = 'active';
};
</script>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3 hidden-print">
          <div class="well sidebar-nav" data-spy="affix">
            <ul class="nav nav-list">
!INCLUDE: src/inc-links.html

            <li class="sidebar-nav-header">Installation</li>
            <li><a href="#dependencies">Dependencies</a></li>
            <li><a href="#using">Using the compiler</a></li>
            </ul>
          </div><!--/.well -->
        </div><!--/span-->
        <div class="span9 maintext">

<h1>Download and Installation</h1>

<p>
This distribution includes the Zélus compiler, runtime libraries, and 
example source code.
The <a href="http://caml.inria.fr/ocaml/index.en.html">OCaml</a> runtime 
(<code>ocamlrun</code>) is required to transform Zélus programs into 
imperative code.
The OCaml compiler is required to compile imperative code into executables.
Many of the examples require <a 
  href="http://lablgtk.forge.ocamlcore.org/">lablgtk2</a>.
The 3D visualization of the <a href="examples.html#stickysprings">Sticky 
  Masses</a> example requires <a 
  href="http://www.linux-nantes.org/~fmonnier/ocaml/GL/">glMLite</a>.
</p>

<p>The current version of Zélus is <strong>1.2.0</strong> (2016-01-22).</p>

<div class="important-button">
  <a class="btn btn-large btn-primary"
     href="zelus-1.2.0-sundials-byte.tar.gz">Download (supports sundials)</a>
  <a class="btn btn-large btn-primary"
     href="zelus-1.2.0-nosundials-byte.tar.gz">Download (internal solver)</a>
</div>

<h2 id="dependencies" class="section">Dependencies</h2>

<table class="table table-bordered table-striped">
  <tr><th>Dependency</th>
      <th>Required version</th>
      <th>Reason</th>
  </tr>

  <tr><td><a href="http://caml.inria.fr/download.en.html">OCaml</a></td>
      <td>Required. &gt;= 4.02.3</td>
      <td>Running the Zélus compiler and compiling examples.</td>
  </tr>

  <tr><td><a href="http://inria-parkas.github.io/sundialsml/">Sundials/ML</a></td>
      <td>Optional. = 2.5.0</td>
      <td>Default solver for the “with sundials” distribution.</td>
  </tr>

  <tr><td><a href="http://projects.camlcity.org/projects/findlib.html">ocamlfind</a></td>
      <td>Optional. &gt;= 1.5.6</td>
      <td>Recommended for compiling your own Zélus programs.</td>
  </tr>

  <tr><td><a href="http://lablgtk.forge.ocamlcore.org/">lablgtk2</a></td>
      <td>Optional. = 2.18.3</td>
      <td>Required for the plotting control and hence many of the 
        examples.</td>
  </tr>

  <tr><td><a href="http://www.linux-nantes.org/~fmonnier/ocaml/GL/">glMLite</a></td>
      <td>Optional. &gt;= 0.03.51</td>
      <td>Required for the <a href="examples.html#stickysprings">Sticky 
          Masses</a> example.</td>
  </tr>
</table>
      
<p>The compiler is distributed as byte code.
It should run on any platform on which the <a 
  href="http://caml.inria.fr">OCaml</a> runtime has been installed.
There are <a href="http://caml.inria.fr/ocaml/release.en.html">packages</a> for 
Linux, Mac, and Windows.
Compiling Zélus programs to executable form requires the full OCaml 
toolchain.
Unfortunately, it may be difficult to run the examples under Windows as 
the most convenient <a 
  href="http://protz.github.com/ocaml-installer/">installer</a> does not 
seem to provide the dllunix and dllbigarray libraries which are required.
We recommend running the examples on Linux or a Mac.</p>

<h3 id="dep-osx">OS X</h3>

<p>The easiest way to ensure the required dependencies is with a combination 
of <a href="http://brew.sh">homebrew</a> and
<a href="http://opam.ocamlpro.com">opam</a>.</p>

<p>Before installing OCaml, be sure to install
<a href="http://xquartz.macosforge.org/">XQuartz</a> otherwise OCaml will be 
installed without the graphics module.</p>

<p>To install the Opam package manager and ocamlfind:</p>
<pre>
brew install opam
opam install ocamlfind
</pre>

<p>To install Lablgtk:</p>
<pre>
brew install pkg-config gtk+
opam install lablgtk
</pre>

If the second step fails, you may need to first run
<pre>
export PKG_CONFIG_PATH=/opt/X11/lib/pkgconfig
</pre>

<p>To install Sundials/ML</p>
<pre>
brew install homebrew/science/sundials
opam install sundialsml
</pre>

<p>It is possible to get glMLite to work, but the process is rather 
complicated.</p>

<h3 id="dep-ubuntu">Ubuntu Linux</h3>

<p>To install the Opam package manager and ocamlfind:</p>
<pre>
sudo apt-get install opam m4
# opam init                 # if this is your first time
opam update &amp;&amp; opam upgrade # optionally
opam switch 4.02.3
eval `opam config env`
opam install ocamlfind
</pre>

<p>To install Lablgtk:</p>
<pre>
sudo apt-get install libgtk2.0-dev
opam install lablgtk
</pre>

<p>To install glMLite (optional):</p>
<pre>
sudo apt-get install freeglut3-dev libjpeg-dev
opam install glMLite
</pre>

<p>To install Sundials/ML:</p>
<pre>
sudo apt-get install libsundials-serial-dev
opam install sundialsml
</pre>

<h2 id="using" class="section">Using the compiler</h2>

<p>After downloading the distribution, run the configure script (optionally 
setting an installation prefix):</p>

<pre>./configure --prefix=/usr/local</pre>

<p>Zélus can then be installed by running:</p>

<pre>sudo make install</pre>

<p>The Zélus compiler is called <code>zeluc</code>.
It compiles <code>.zls</code> Zélus source files into <code>.ml</code> OCaml 
source files:</p>

<pre>zeluc -i backhoedyn.ls</pre>

<p>Adding <code>-v</code> will show results after each of the intermediate 
source-to-source transformations.</p>

<p>Several dependencies are required to compile the resulting OCaml code. 
The simplest solution is to use ocamlfind.
For example to compile the <a href="examples.html#bangbang">Bang-Bang 
  Temperature Control</a> example:</p>
<pre>
zeluc -s main -gtk2 bangbang.ml
ocamlfind ocamlc -o bangbang -package zelus.gtk -linkpkg bangbang.ml main.ml
</pre>

<p>The <code>-s main</code> option generates simulation code for the node 
called <code>main</code> into the file <code>main.ml</code>.
The <code>-gtk2</code> option requests the lablgtk runtime.
</p>

        </div><!--/span-->
      </div><!--/row-->
    </div><!--/.fluid-container-->

!INCLUDE: src/inc-javascript.html
  </body>
</html>
